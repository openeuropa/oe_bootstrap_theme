{#
/**
 * @file
 * Card pattern search variant.
 */
#}
{% set _badges = [] %}
{% if badges is not empty %}
  {% set badge_attr = create_attribute({'class': ['me-2']}) %}
  {% for key,item in badges %}
    {% if not loop.last %}
      {% set badge_attr = create_attribute() %}
    {% endif %}
    {% if key|first != '#' %}
      {% set _badges = _badges|merge([{
        label: item['#title'],
        attributes: badge_attr
      }]) %}
    {% endif %}
  {% endfor %}
{% endif %}
{% set _image = image %}
{% if image is defined and image['#markup'] is not empty %}
  {% set _image = {
    path: image['#markup'],
    position: 'top',
    classes: 'd-none d-md-block',
  } %}
{% endif %}
{% if text is defined and text.classes is not defined %}
  {% set text = {
    content: text|render|striptags,
    classes: 'mb-3',
  } %}
{% endif %}
{% include '@oe-bcl/card' with {
  horizontal: true,
  horizontal_grid: {
    left_col_classes: 'col-md-3 col-lg-2 rounded mw-listing-img',
    right_col_classes: 'col-md-9 col-lg-10',
  },
  extra_classes_body: 'p-0 pb-md-0 pb-3',
  badges: _badges,
  title: {
    tag: 'a',
    content: title,
  },
  text: text,
  attributes: create_attribute({'class': [
    'listing-item',
    'border-bottom',
    'border-md-0',
    'border-0',
  ]}),
  text_color: 'dark',
  image: _image,
  content: content
} only %}
